# ActScript 관리자 시스템 가이드

## 개요
ActScript 플랫폼의 관리자 기능은 사이트 통계 확인, 사용자 관리, 콘텐츠 관리 등의 기능을 제공합니다.

## 관리자 계정 생성

### 1. 개발 환경에서 관리자 계정 생성

```bash
# 백엔드 디렉토리에서 실행
cd backend
npm run create-admin
```

### 2. 기본 관리자 계정 정보
- **사용자명**: `admin`
- **이메일**: `admin@actscript.com`
- **기본 비밀번호**: `ActScript2024!@#`
- **권한**: `admin`

> ⚠️ **보안 주의사항**: 최초 로그인 후 반드시 비밀번호를 변경하세요.

### 3. 수동으로 관리자 권한 부여

기존 사용자에게 관리자 권한을 부여하려면:

```javascript
// MongoDB에서 직접 실행
db.users.updateOne(
  { email: "사용자이메일@example.com" },
  { $set: { role: "admin" } }
)
```

## 관리자 기능

### 1. 대시보드 통계
- **일일 방문자 수**: 오늘/어제 방문자 비교
- **사용자 통계**: 전체 사용자 수, 신규 가입자
- **콘텐츠 통계**: AI 대본, 일반 대본, 게시글 수
- **주간 통계**: 7일간의 트렌드 분석

### 2. 실시간 모니터링
- **페이지뷰**: 페이지별 방문 통계
- **최근 활동**: 신규 가입자, 새 콘텐츠 등록
- **성장률**: 사용자 증가율 추이

### 3. 콘텐츠 현황
- 배우 프로필 등록 수
- 배우/모델 모집 글 수  
- 커뮤니티 게시글 수
- AI 생성 대본 통계

## 관리자 페이지 접근

### 1. 로그인
1. https://your-domain.com/login 접속
2. 관리자 계정으로 로그인
3. 마이페이지에서 "관리자" 탭 확인

### 2. 관리자 권한 확인
- 관리자 권한이 있는 사용자만 "관리자" 탭이 표시됩니다
- 일반 사용자는 해당 탭을 볼 수 없습니다

## API 엔드포인트

### 관리자 전용 API
```
GET /api/admin/dashboard/stats    # 대시보드 통계
GET /api/admin/visitors          # 방문자 통계
GET /api/admin/users             # 사용자 목록
PUT /api/admin/users/:id/role    # 사용자 권한 변경
PUT /api/admin/users/:id/status  # 사용자 계정 상태 변경
GET /api/admin/scripts           # 대본 목록
GET /api/admin/system/info       # 시스템 정보
```

### 권한 보호
모든 관리자 API는 `adminAuth` 미들웨어로 보호됩니다:
- JWT 토큰 검증
- 관리자 권한 확인 (`role: 'admin'`)
- 유효하지 않은 요청 차단

## 방문자 추적

### 자동 추적 기능
- 실제 사용자 방문만 카운트 (봇, 크롤러 제외)
- 고유 IP 기반 중복 제거
- 페이지별 방문 통계
- 일일 자동 집계

### 추적 대상 페이지
- 홈페이지 (`/`)
- 대본 목록 (`/scripts`)
- AI 대본 (`/ai-script`)
- 배우 관련 페이지
- 마이페이지

## 데이터베이스 스키마

### 사용자 (User) 모델
```javascript
{
  username: String,
  email: String, 
  role: String, // 'user' | 'admin'
  isActive: Boolean,
  createdAt: Date,
  // ... 기타 필드
}
```

### 방문자 (Visitor) 모델
```javascript
{
  date: String,        // YYYY-MM-DD
  count: Number,       // 일일 고유 방문자 수
  uniqueIPs: [String], // 고유 IP 목록
  pageViews: {         // 페이지별 조회수
    home: Number,
    scripts: Number,
    aiScript: Number,
    // ... 기타 페이지
  }
}
```

## 보안 고려사항

### 1. 권한 검증
- 모든 관리자 기능은 서버사이드에서 권한 검증
- 클라이언트 사이드는 UI 표시용으로만 사용

### 2. 데이터 보호
- 민감한 사용자 정보는 마스킹 처리
- 비밀번호 등 보안 정보 제외

### 3. 감사 로그
- 관리자 활동 로깅 (향후 구현 예정)
- 중요한 변경사항 기록

## 문제 해결

### 1. 관리자 탭이 보이지 않을 때
- 사용자 권한 확인: `user.role === 'admin'`
- 로그아웃 후 재로그인
- 브라우저 캐시 클리어

### 2. 통계 데이터가 로드되지 않을 때  
- 네트워크 연결 확인
- API 서버 상태 확인
- 브라우저 개발자 도구에서 에러 확인

### 3. 관리자 계정 생성 실패
- MongoDB 연결 상태 확인
- 환경 변수 설정 확인
- 기존 계정 중복 여부 확인

## 향후 개선 계획

### 1. 추가 관리 기능
- 사용자 상세 관리 (계정 정지, 활성화)
- 콘텐츠 관리 (승인, 거부, 삭제)
- 신고 관리 시스템

### 2. 고급 분석
- 사용자 행동 분석
- 콘텐츠 인기도 분석
- 시간대별 활동 패턴

### 3. 알림 시스템
- 중요 이벤트 실시간 알림
- 이메일 알림 기능
- 시스템 상태 모니터링

---

**문의사항이 있으시면 개발팀에 연락해주세요.**