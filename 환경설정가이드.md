# 🔧 환경 설정 가이드

## 📋 **환경별 파일 구조**

```
actscript/
├── frontend/
│   ├── .env                # 운영 환경 설정
│   └── .env.local          # 로컬 개발 환경 설정
└── backend/
    ├── .env                # 운영 환경 설정
    └── .env.local          # 로컬 개발 환경 설정
```

## 🌍 **환경별 URL 설정**

### **로컬 개발 환경**
- **프론트엔드**: `http://localhost:3000`
- **백엔드 API**: `http://localhost:10000/api`
- **자동 감지**: `localhost`, `127.0.0.1`, `192.168.*` 에서 자동으로 로컬 설정 사용

### **운영 환경 (Render)**
- **프론트엔드**: `https://actscript-frontend.onrender.com`
- **백엔드 API**: `https://actscript-backend.onrender.com/api`
- **도메인**: `https://www.actpiece.com`, `https://actpiece.com`

## 🔄 **개발 시작 방법**

### **1. 로컬 개발**
```bash
# 필수: cross-env 설치
cd frontend
npm install

# 1. 백엔드 시작
cd backend
npm run dev    # .env.local 자동 로드

# 2. 프론트엔드 시작 (두 가지 방법)
cd frontend
npm run dev           # 권장: 개발 환경 명시
# 또는
npm run start:dev     # 동일함

# 3. 환경 변수 디버깅
npm run debug:env     # 현재 설정된 환경 변수 확인
```

### **2. 운영 배포**
```bash
# Render에서 자동으로 .env 설정 사용
git push origin main
```

## ⚡ **주요 개선사항**

### **Before (문제점)**
- 복잡한 도메인별 분기 로직
- URL 설정 불일치
- package.json proxy 설정 충돌
- CORS 오류 빈발
- 환경별 설정 혼재
- 로컬/운영 환경 다른 동작

### **After (해결)**
- 환경 변수 우선 사용
- proxy 설정 제거로 충돌 해결
- NODE_ENV 기반 명확한 환경 감지
- 상세한 환경 정보 로깅
- 일관된 URL 설정
- 명확한 환경 분리

## 🛠️ **문제 해결**

### **API 호출 실패시**
1. 콘솔에서 `🌐 API Base URL:` 로그 확인
2. 브라우저 Network 탭에서 실제 요청 URL 확인
3. CORS 오류시 백엔드 CORS_ORIGIN 설정 확인

### **로컬 개발시 주의사항**
- `.env.local` 파일이 `.env`보다 우선순위 높음
- 포트 변경시 양쪽 환경 파일 모두 수정
- API 키는 로컬과 운영 동일하게 사용

## 🔐 **보안 주의사항**

- `.env.local` 파일은 **절대 Git에 커밋하지 마세요**
- API 키와 시크릿은 환경 변수로만 관리
- 프로덕션 키는 Render 환경 변수에서 설정

## 📞 **문의사항**

환경 설정 관련 문제가 있으면 이 가이드를 먼저 확인해주세요!